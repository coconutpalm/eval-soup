<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="../../style.css">
        <link rel="stylesheet" type="text/css" href="../../paren-soup-light.css">
    </head>
    <body>
        <span id="app"><div data-reactroot="" data-reactid="1" data-react-checksum="-1516990678"><div data-reactid="2"><div class="nses" data-reactid="3"><div data-reactid="4"><a href="../../clj/eval-soup.core.html" data-reactid="5">eval-soup.core</a></div><div data-reactid="6"><div class="tag" data-reactid="7">CLJS</div><a href="../../cljs/eval-soup.core.html" data-reactid="8">eval-soup.core</a></div></div></div><div style="left:300px;" class="vars" data-reactid="9"><!-- react-empty: 10 --><div class="var-info" data-reactid="11"><div data-reactid="12"><h2 data-reactid="13">(code-&gt;results forms)</h2><h2 data-reactid="14">(code-&gt;results forms {:keys [timeout disable-timeout? disable-security?], :or {timeout 4000, disable-timeout? false, disable-security? false}, :as opts})</h2></div><div class="section doc" data-reactid="15">Returns a vector of the evaluated result of each of the given forms.
  If any of the forms are strings, it will read them first.</div><div class="section" data-reactid="16"><h2 data-reactid="17">Example</h2><div class="section" data-reactid="18"><div class="section doc" data-reactid="19">You can reference vars you previously made.</div><div class="paren-soup" data-reactid="20"><div style="display:none;" class="instarepl" data-reactid="21"></div><div class="content" data-reactid="22"><span class='collection list'><span class='delimiter'>(</span><span class='symbol'>code-&gt;results</span> <span class='collection vector'><span class='delimiter'>[</span>&apos;<span class='collection list'><span class='delimiter'>(</span><span class='symbol'>def</span> <span class='symbol'>n</span> <span class='number'>4</span><span class='delimiter'>)</span></span> &apos;<span class='collection list'><span class='delimiter'>(</span><span class='symbol'>conj</span> <span class='collection vector'><span class='delimiter'>[</span><span class='number'>1</span> <span class='number'>2</span> <span class='number'>3</span><span class='delimiter'>]</span></span> <span class='symbol'>n</span><span class='delimiter'>)</span></span><span class='delimiter'>]</span></span><span class='delimiter'>)</span></span>
</div></div></div><div class="section" data-reactid="23"><div class="section doc" data-reactid="24">You can pass the code as strings too.</div><div class="paren-soup" data-reactid="25"><div style="display:none;" class="instarepl" data-reactid="26"></div><div class="content" data-reactid="27"><span class='collection list'><span class='delimiter'>(</span><span class='symbol'>code-&gt;results</span> <span class='collection vector'><span class='delimiter'>[</span><span class='string'>&quot;(def n 4)&quot;</span> <span class='string'>&quot;(conj [1 2 3] n)&quot;</span><span class='delimiter'>]</span></span><span class='delimiter'>)</span></span>
</div></div></div><div class="section" data-reactid="28"><div class="section doc" data-reactid="29">If your code exceeds the timeout, you&#x27;ll see an exception.
   
   You can turn off timeout protection by passing `:disable-timeout? true`
   in the options map.</div><div class="paren-soup" data-reactid="30"><div style="display:none;" class="instarepl" data-reactid="31"></div><div class="content" data-reactid="32"><span class='collection list'><span class='delimiter'>(</span><span class='symbol'>code-&gt;results</span> <span class='collection vector'><span class='delimiter'>[</span>&apos;<span class='collection list'><span class='delimiter'>(</span><span class='symbol'>while</span> <span class='boolean'>true</span><span class='delimiter'>)</span></span><span class='delimiter'>]</span></span> <span class='collection map'><span class='delimiter'>{</span><span class='keyword'>:timeout</span> <span class='number'>1000</span><span class='delimiter'>}</span></span><span class='delimiter'>)</span></span>
</div></div></div><div class="section" data-reactid="33"><div class="section doc" data-reactid="34">If your code tries to exit, you&#x27;ll see an exception.
   
   You can turn off exit protection by passing `:disable-security? true`
   in the options map.</div><div class="paren-soup" data-reactid="35"><div style="display:none;" class="instarepl" data-reactid="36"></div><div class="content" data-reactid="37"><span class='collection list'><span class='delimiter'>(</span><span class='symbol'>code-&gt;results</span> <span class='collection vector'><span class='delimiter'>[</span>&apos;<span class='collection list'><span class='delimiter'>(</span><span class='symbol'>System/exit</span> <span class='number'>0</span><span class='delimiter'>)</span></span><span class='delimiter'>]</span></span><span class='delimiter'>)</span></span>
</div></div></div></div><div class="section" data-reactid="38"><h2 data-reactid="39">Source</h2><div class="paren-soup" data-reactid="40"><div class="content" data-reactid="41"><span class='collection list'><span class='delimiter'>(</span><span class='symbol'>defn</span> <span class='symbol'>code-&gt;results</span>
  <span class='string'>&quot;Returns a vector of the evaluated result of each of the given forms.
  If any of the forms are strings, it will read them first.&quot;</span>
  <span class='collection list'><span class='delimiter'>(</span><span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>forms</span><span class='delimiter'>]</span></span>
   <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>code-&gt;results</span> <span class='symbol'>forms</span> <span class='collection map'><span class='delimiter'>{</span><span class='delimiter'>}</span></span><span class='delimiter'>)</span></span><span class='delimiter'>)</span></span>
  <span class='collection list'><span class='delimiter'>(</span><span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>forms</span> <span class='collection map'><span class='delimiter'>{</span><span class='keyword'>:keys</span> <span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>timeout</span>
                  <span class='symbol'>disable-timeout?</span>
                  <span class='symbol'>disable-security?</span><span class='delimiter'>]</span></span>
           <span class='keyword'>:or</span> <span class='collection map'><span class='delimiter'>{</span><span class='symbol'>timeout</span> <span class='number'>4000</span>
                <span class='symbol'>disable-timeout?</span> <span class='boolean'>false</span>
                <span class='symbol'>disable-security?</span> <span class='boolean'>false</span><span class='delimiter'>}</span></span>
           <span class='keyword'>:as</span> <span class='symbol'>opts</span><span class='delimiter'>}</span></span><span class='delimiter'>]</span></span>
   <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>let</span> <span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>opts</span> <span class='collection map'><span class='delimiter'>{</span><span class='keyword'>:timeout</span> <span class='symbol'>timeout</span>
               <span class='keyword'>:disable-timeout?</span> <span class='symbol'>disable-timeout?</span>
               <span class='keyword'>:disable-security?</span> <span class='symbol'>disable-security?</span><span class='delimiter'>}</span></span><span class='delimiter'>]</span></span>
     <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>loop</span> <span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>forms</span> <span class='symbol'>forms</span>
            <span class='symbol'>results</span> <span class='collection vector'><span class='delimiter'>[</span><span class='delimiter'>]</span></span>
            <span class='symbol'>nspace</span> <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>create-ns</span> &apos;<span class='symbol'>clj.user</span><span class='delimiter'>)</span></span><span class='delimiter'>]</span></span>
       <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>if-let</span> <span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>form</span> <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>first</span> <span class='symbol'>forms</span><span class='delimiter'>)</span></span><span class='delimiter'>]</span></span>
         <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>let</span> <span class='collection vector'><span class='delimiter'>[</span><span class='collection vector'><span class='delimiter'>[</span><span class='symbol'>result</span> <span class='symbol'>current-ns</span><span class='delimiter'>]</span></span> <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>eval-form</span> <span class='symbol'>form</span> <span class='symbol'>nspace</span> <span class='symbol'>opts</span><span class='delimiter'>)</span></span><span class='delimiter'>]</span></span>
           <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>recur</span> <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>rest</span> <span class='symbol'>forms</span><span class='delimiter'>)</span></span> <span class='collection list'><span class='delimiter'>(</span><span class='symbol'>conj</span> <span class='symbol'>results</span> <span class='symbol'>result</span><span class='delimiter'>)</span></span> <span class='symbol'>current-ns</span><span class='delimiter'>)</span></span><span class='delimiter'>)</span></span>
         <span class='symbol'>results</span><span class='delimiter'>)</span></span><span class='delimiter'>)</span></span><span class='delimiter'>)</span></span><span class='delimiter'>)</span></span><span class='delimiter'>)</span></span></div></div></div></div><div class="footer" data-reactid="42"><!-- react-text: 43 -->Generated by <!-- /react-text --><a href="https://github.com/oakes/Dynadoc" target="_blank" data-reactid="44">Dynadoc</a></div></div></div></span>
        <script type="text/edn" id="initial-state">{:ns-meta nil, :var-sym code->results, :type :clj, :nses ({:var-syms [wrap-security code->results wrap-timeout eval_soup.core.proxy$java.lang.SecurityManager$ff19274a with-security], :type :clj, :sym eval-soup.core} {:var-syms [code->results], :type :cljs, :sym eval-soup.core}), :cljs-nses-and-vars {eval-soup.core ({:sym code->results, :meta {:doc "Evaluates each form, providing the results in a callback.\n  If any of the forms are strings, it will read them first.", :arglists [[forms cb] [forms cb {:keys [*current-ns *state custom-load timeout disable-timeout?], :or {*current-ns (atom (quote cljs.user)), *state *cljs-state, custom-load custom-load!, timeout 4000, disable-timeout? false}, :as opts}]]}, :source "(defn\n code->results\n \"Evaluates each form, providing the results in a callback.\\n  If any of the forms are strings, it will read them first.\"\n ([forms cb] (code->results forms cb {}))\n ([forms\n   cb\n   {:keys [*current-ns *state custom-load timeout disable-timeout?],\n    :or\n    {*current-ns (atom 'cljs.user),\n     *state *cljs-state,\n     custom-load custom-load!,\n     timeout 4000,\n     disable-timeout? false},\n    :as opts}]\n  (let\n   [forms\n    (mapv\n     (fn*\n      [p1__18099#]\n      (if\n       (string? p1__18099#)\n       (str->form @*current-ns p1__18099#)\n       p1__18099#))\n     forms)\n    init-forms\n    (vec\n     (concat\n      ['(ns cljs.user)]\n      (when-not\n       disable-timeout?\n       ['(def ps-last-time (atom 0))\n        '(defn\n          ps-reset-timeout!\n          []\n          (reset! ps-last-time (.getTime (js/Date.))))\n        '(defn\n          ps-check-for-timeout!\n          [timeout]\n          (when\n           (> (- (.getTime (js/Date.)) @ps-last-time) timeout)\n           (throw (js/Error. \"Execution timed out.\"))))])\n      ['(set! *print-err-fn* (fn [_])) (list 'ns @*current-ns)]))\n    timeout-cb\n    (fn\n     [results]\n     (eval-forms\n      (add-timeouts-if-necessary timeout forms results)\n      cb\n      *state\n      *current-ns\n      custom-load))\n    init-cb\n    (fn\n     [results]\n     (eval-forms\n      (if disable-timeout? forms (map wrap-macroexpand forms))\n      (if disable-timeout? cb timeout-cb)\n      *state\n      *current-ns\n      custom-load))]\n   (eval-forms init-forms init-cb *state *current-ns custom-load))))\n", :examples [{:doc "You can reference vars you previously made.", :with-callback callback, :body (code->results [(quote (def n 4)) (quote (conj [1 2 3] n))] callback), :body-str "(code->results ['(def n 4) '(conj [1 2 3] n)] callback)\n", :id "eval-soup.core/code->results/0"} {:doc "You can pass the code as strings too.", :with-callback callback, :body (code->results ["(def n 4)" "(conj [1 2 3] n)"] callback), :body-str "(code->results [\"(def n 4)\" \"(conj [1 2 3] n)\"] callback)\n", :id "eval-soup.core/code->results/1"} {:doc "If your code exceeds the timeout, you'll see an exception.\n   \n   You can turn off timeout protection by passing `:disable-timeout? true`\n   in the options map.", :with-callback callback, :body (code->results [(quote (while true))] callback {:timeout 1000}), :body-str "(code->results ['(while true)] callback {:timeout 1000})\n", :id "eval-soup.core/code->results/2"}]})}, :rel-path "../../", :static? true, :check-for-updates? false, :ns-sym eval-soup.core, :vars [{:sym code->results, :meta {:arglists ([forms] [forms {:keys [timeout disable-timeout? disable-security?], :or {timeout 4000, disable-timeout? false, disable-security? false}, :as opts}]), :doc "Returns a vector of the evaluated result of each of the given forms.\n  If any of the forms are strings, it will read them first."}, :source "(defn code->results\n  \"Returns a vector of the evaluated result of each of the given forms.\n  If any of the forms are strings, it will read them first.\"\n  ([forms]\n   (code->results forms {}))\n  ([forms {:keys [timeout\n                  disable-timeout?\n                  disable-security?]\n           :or {timeout 4000\n                disable-timeout? false\n                disable-security? false}\n           :as opts}]\n   (let [opts {:timeout timeout\n               :disable-timeout? disable-timeout?\n               :disable-security? disable-security?}]\n     (loop [forms forms\n            results []\n            nspace (create-ns 'clj.user)]\n       (if-let [form (first forms)]\n         (let [[result current-ns] (eval-form form nspace opts)]\n           (recur (rest forms) (conj results result) current-ns))\n         results)))))", :spec nil, :examples [{:doc "You can reference vars you previously made.", :body (code->results [(quote (def n 4)) (quote (conj [1 2 3] n))]), :body-str "(code->results ['(def n 4) '(conj [1 2 3] n)])\n", :id "eval-soup.core/code->results/0"} {:doc "You can pass the code as strings too.", :body (code->results ["(def n 4)" "(conj [1 2 3] n)"]), :body-str "(code->results [\"(def n 4)\" \"(conj [1 2 3] n)\"])\n", :id "eval-soup.core/code->results/1"} {:doc "If your code exceeds the timeout, you'll see an exception.\n   \n   You can turn off timeout protection by passing `:disable-timeout? true`\n   in the options map.", :body (code->results [(quote (while true))] {:timeout 1000}), :body-str "(code->results ['(while true)] {:timeout 1000})\n", :id "eval-soup.core/code->results/2"} {:doc "If your code tries to exit, you'll see an exception.\n   \n   You can turn off exit protection by passing `:disable-security? true`\n   in the options map.", :body (code->results [(quote (System/exit 0))]), :body-str "(code->results ['(System/exit 0)])\n", :id "eval-soup.core/code->results/3"}]}]}</script>
        <script type="text/javascript" src="../../main.js"></script>
    </body>
</html>
